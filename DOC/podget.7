.\" Text automatically generated by txt2man
.TH podget 7 "23 September 2020" "" ""
.SH NAME
\fBPodget \- Simple tool to automate downloading of podcasts.
\fB
.SH SYNOPSIS
.nf
.fam C
\fBpodget\fP <options> [\fIcommand\fP]
\fBpodget\fP \fB-h\fP | \fB--help\fP

.fam T
.fi
.fam T
.fi
.SH DESCRIPTION

Podget is a simple podcast aggregator/downloader optimized for scheduled background jobs (i.e. cron).
.PP
It features support for:
.IP \(bu 3
Downloading podcasts from RSS and ATOM XML feeds.
.IP \(bu 3
For sorting the files into folders and categories.
.IP \(bu 3
For importing URLs from iTunes PCAST files and OPML lists.
.IP \(bu 3
Automatic M3U & ASX playlist creation.
.IP \(bu 3
Cleanup of old files.
.IP \(bu 3
Automatic UTF-16 conversion for feeds hosted on MS Windows Servers.
.SH OPTIONS
.TP
.B
\fB-c\fP, \fB--config\fP <FILE>
Name of configuration file.
.TP
.B
\fB--create-config\fP <FILE>
Create configuration file and exit.
.TP
.B
\fB-C\fP, \fB--cleanup\fP
Skip downloading and only run cleanup loop.
.TP
.B
\fB--cleanup_days\fP <NUMBER>
Cleanup files older than <NUMBER> days.
.TP
.B
\fB--cleanup_simulate\fP
Simulate cleanup loop to see what files would
be deleted.
.TP
.B
\fB-d\fP, \fB--dir_config\fP <DIRECTORY>
Directory that configuration files are stored in.
.TP
.B
\fB--dir_session\fP <DIRECTORY>
Directory that session files are stored in.
.TP
.B
\fB-f\fP, \fB--force\fP
Force download of items from each feed even if
they've already been downloaded.
.TP
.B
\fB--import_opml\fP <FILE or URL>
Import servers from OPML file or HTTP/FTP URL.
.TP
.B
\fB--export_opml\fP <FILE>
Export serverlist to OPML file.
.TP
.B
\fB--import_pcast\fP <FILE or URL>
Import server from iTunes PCAST file or HTTP/FTP URL.
.TP
.B
\fB-l\fP, \fB--library\fP <DIRECTORY>
Directory to store downloaded files in.
.TP
.B
\fB-n\fP, \fB--no-playlist\fP
Do not create M3U playlist of new items.
.TP
.B
\fB-p\fP, \fB--playlist-asx\fP
In addition to M3U playlists, create ASX playlists.
.TP
.B
\fB--playlist-per-podcast\fP
Create a playlist of new items for each podcast feed.
.TP
.B
\fB-r\fP, \fB--recent\fP <COUNT>
Download only the <COUNT> newest items from
each feed.
.TP
.B
\fB--serverlist\fP <FILE>
Use <FILE> as serverlist instead of default.
.TP
.B
\fB-s\fP, \fB--silent\fP
Run silently (for cron jobs).
.TP
.B
\fB-v\fP
Set verbosity to level 1.
.TP
.B
\fB-vv\fP
Set verbosity to level 2.
.TP
.B
\fB-vvv\fP
Set verbosity to level 3.
.TP
.B
\fB-vvvv\fP
Set verbosity to level 4.
.TP
.B
\fB--verbosity\fP <LEVEL>
Set verbosity level (0-3).
.TP
.B
\fB-V\fP, \fB--version\fP
Display version.
.TP
.B
\fB-h\fP, \fB--help\fP
Display help.
.RE
.PP

.SH EXAMPLE CRON JOB

Once \fBpodget\fP is running correctly, it's most useful if you run it from a cron job so that the new episodes are available to play or load onto a portable player and you don't have to wait for them to download.
.PP
To edit your crontab, do:
.PP
.nf
.fam C
  $ crontab \-e

.fam T
.fi
Then insert one line (i for insert mode), like the following:
.PP
.nf
.fam C
  15 04 * * * /usr/bin/podget \-s

.fam T
.fi
This will run \fBpodget\fP at 4:15 AM every day.
.SH AUTOMATIC CLEANUP

You can enable automatic cleanup with every run by configuring it in your $HOME/.\fBpodget\fP/podgetrc file. Simply set the following options:
.PP
.nf
.fam C
  # Autocleanup.
  # 0 == disabled
  # 1 == delete any old content
  cleanup=1

  # Number of days to keep files.   Cleanup will remove anything
  # older than this.
  cleanup_days=7

.fam T
.fi
However, some people prefer to run cleanup as a separate cron session. To do that, set the options in podgetrc to:
.PP
.nf
.fam C
  # Autocleanup.
  # 0 == disabled
  # 1 == delete any old content
  cleanup=0

  # Number of days to keep files.   Cleanup will remove anything
  # older than this.
  cleanup_days=7

.fam T
.fi
And add a cron job to run cleanup, like one of these examples:
.PP
.nf
.fam C
  # Once a week on Sunday at 04:15AM
  15 04 * * Sun /usr/bin/podget \-C

.fam T
.fi
.SH SESSION CONTROL

Podget checks for already running sessions when it starts and exits if any are found. Each session requires its own core configuration file, so for multiple sessions simply provide a unique \fB-c\fP <configfile> option for each.
.SH ENABLING DEBUG OUTPUT

To enable debug output, you can do it two ways.
.PP
The first way is by uncommenting the DEBUG option in your podgetrc and setting it to '1'.
However this way will not enable DEBUG until just over 1400 lines into the script when the podgetrc is read.
This is sufficient for most issues.
.PP
The second way is from the \fIcommand\fP line and enables debug as early as possible.
Simply execute \fBpodget\fP like so:
DEBUG=1 \fBpodget\fP \fB-vvvv\fP
.PP
You can enable other options as well if you need to but for debugging purposes, 
it is highly recommended that you enabled as much verbosity as possible.
.SH EXAMPLE SERVER LIST

By default, Podget uses $HOME/.\fBpodget\fP/serverlist for the default list of servers to contact. However you can configure the name with the config_serverlist variable in your $HOME/.\fBpodget\fP/podgetrc file.
.PP
.nf
.fam C
        Default format with category and name:
          <url> <category> <name>

        Alternate Formats:
          1. With a category but no name.
              <url> <category>
          2. With a name but no category (2 ways).
              <url> No_Category <name>
              <url> . <name>
          3. With neither a category or name.
              <url>

.fam T
.fi
.SS        NOTES:
.IP 1. 4
URL Rules:
.RS
.TP
.B
A.
Any spaces in the URL need to be converted to %20
.RE
.IP 2. 4
Category Rules:
.RS
.TP
.B
A.
Must be one word without spaces.
.TP
.B
B.
You may use underscores and dashes.
.TP
.B
C.
You can insert date substitutions.
.RS
.TP
.B
%YY%
==  Year
.TP
.B
%MM%
==  Month
.TP
.B
%DD%
==  Day
.RE
.TP
.B
D.
If you want to disable the use of a category for a feed that has a name, the
.RS
.TP
.B
category must be either a single period (.) or 'No_Category'.
If the name is
blank, then the category can also be blank.
.RE
.RE
.IP 3. 4
Name Rules:
.RS
.TP
.B
A.
If you are creating ASX playlists, make sure the feed name does not
have any spaces in it and the filename cannot be blank.
.TP
.B
B.
You can leave the feed name blank, and files will be saved in the
category directory.
.TP
.B
C.
Names with spaces are only compatible with filesystems that allow for spaces
.RS
.TP
.B
in filenames.
For example, spaces in feed names are OK for feeds saved to
Linux ext partitions but are not OK for those saved to Microsoft FAT partitions.
.RE
.TP
.B
D.
Feed names can be disabled by leaving them blank.
.RE
.IP 4. 4
Disable the downloading of any feed by commenting it out with a leading #.
.RE
.PP
Examples:
http://www.lugradio.org/episodes.rss Linux LUG Radio
.RS
.PP
Example with date substitution in the category and a blank feed name:
http://downloads.bbc.co.uk/rmhttp/downloadtrial/worldservice/summary/rss.xml News-%YY%-%MM%-%DD%
.PP
Example of two ways to do a feed with authentication:
http://somesite.com/feed.rss CATEGORY Feed Name USER:username PASS:password
http://username:password@somesite.com/feed.rss CATEGORY Feed Name
.RS
.TP
.B
NOTE:
The second method will fail if a colon (:) is part of the username or password.
Both methods will fail if a space is part of the username or password.
.RE
.PP
Atom Feed Options:
The following options are available for advanced handling of Atom feeds.
.RS
.TP
.B
ATOM_FILTER_SIMPLE
-  This option will enable filtering for just audio or video files from a feed.
.TP
.B
ATOM_FILTER_TYPE="type"
-  This option allows more detailed filtering of the variety of types available.  This can
.RS
.TP
.B
limit the files downloaded to one type (example:
"audio/mpeg") or to a few types
(example: "(audio|video)/.*" for all audio and video types, OR "audio/.*" for all audio
types).
.RE
.TP
.B
ATOM_FILTER_LANG="language" -
If an Atom feed supports multiple languages for enclosures, then you can use this
.RS
.TP
.B
option to filter to only those you desire.
You can limit to one language (example: "en"
for just English) or combine several supported languages to get them all (example: "(en|es|fr)"
.TP
.B
to download files in English, Spanish and French.
How the languages are defined may vary
from feed to feed.
.RE
.TP
.B
Note:
If you do not enable ANY of the ATOM_FILTER options, when you run \fBpodget\fP with "\fB-vv\fP" or higher, for every Atom feed
that supports multiple enclosures per item, Podget will tell you with the count per type or language to help you decide
if you should use the filters to reduce the quantity of your downloads.
.RS
.PP
Examples:
http://somesite.com/feed.rss CATEGORY Feed Name ATOM_FILTER_SIMPLE
http://somesite.com/feed.rss CATEGORY Feed Name ATOM_FILTER_TYPE="audio/mpeg"
http://somesite.com/feed.rss CATEGORY Feed Name \fBATOM_FILTER_TYPE="\fP(audio|video)/.*"
http://somesite.com/feed.rss CATEGORY Feed Name ATOM_FILTER_LANG="en"
http://somesite.com/feed.rss CATEGORY Feed Name \fBATOM_FILTER_LANG="\fP(en|es|fr)"
http://somesite.com/feed.rss CATEGORY Feed Name ATOM_FILTER_TYPE="audio/mpeg" ATOM_FILTER_LANG="en"
.RE
.RE
.PP
Additional Options:
OPT_PREFER_IPV4 or
.RE
.TP
.B
OPT_PREFER_IPV6
- Configure Wget so that when a DNS lookup gives it a choice of several addresses
.RS
.TP
.B
that it should connect to the specified family first.
If multiple options are
specified, it will most commonly attempt to use IPv6 addresses first.
.RE
.TP
.B
OPT_NO_CERT_CHECK
- Disable Wget verification of SSL certificates (WGET: \fB--no-check-certificate\fP).
.RS
.TP
.B
OPT_CONTENT_DISPOSITION
- Attempt to get filename from the Content-Disposition tag that is part of
wget \fB--server-response\fP.
.TP
.B
OPT_DISPOSITION_FAIL
- This option works in conjunction with OPT_CONTENT_DISPOSITION by removing
.RS
.TP
.B
any URLs that fail to receive a filename from the COMPLETED log.
This allows
.TP
.B
them to be automatically retried the next time a session runs.
If this option
is added to a feed that has already been downloaded then the user will need to
remove the URLs for the problematic files from the COMPLETED log manually. On
one feed this allowed for the improvement of the number of filename problems from
.TP
.B
approximately 15% to under 2% over the course of 6 sessions.
Those sessions can
occur sequentially on one day or as part of your established cron rotation.
.RE
.TP
.B
OPT_FILENAME_LOCATION
- Some feeds do not have the detailed filename listed in the FEED but rather rename
.RS
.TP
.B
the file on redirection.
This option address that issue by attempting to grab the
filename from the last 'Location:' tag in the output of 'wget \fB--server-response\fP'.
.RE
.TP
.B
OPT_FILENAME_RENAME_MDATE
- For feeds that use a singular filename for each item that is identified by a long
.RS
.TP
.B
somewhat incomprehensible string in the URL.
These feeds were previously fixed
with FILENAME_FORMATFIX4 which would append the string to the common filename to
.TP
.B
produce unique filenames for each item.
However this produced filenames that were
.TP
.B
not very easy to understand.
This option gives us another method for dealing with
.TP
.B
these common filenames.
This appends the date of the files last change (modification
.TP
.B
date) as a prefix to the filename in the format of YYYYMMDD_HHhMMm_<common-part>.
This
makes the filenames sortable and gives the user something that makes a moderate amount
.TP
.B
of sense.
Does not work for all feeds, for some feeds the last modification time for
.TP
.B
each file is the time of download.
Which may be acceptable in some situations but can
cause confusion when downloading more than one item at a time from a feed.
.RE
.TP
.B
OPT_FEED_ORDER_ASCENDING
-  By default, Podget assumes that items in a feed will be listed from newest to oldest
.RS
.TP
.B
(descending order).
This option will modify Podget's handling of the feed for those
.TP
.B
that are listed from oldest to newest.
This option will not have any noticeable effect
.TP
.B
for feeds where you want to download every item.
It will have an effect for new feeds
when combined with the \fB--recent\fP [COUNT] option.
.RE
.TP
.B
OPT_FEED_PLAYLIST_NEWFIRST -
Most playlist options create lists of just the new items that are downloaded in the
.RS
.TP
.B
current session.
This option creates or updates a full playlist for all items available
for a feed sorted from newest to oldest based on the modification date/time of the file.
.RE
.TP
.B
OPT_FEED_PLAYLIST_OLDFIRST -
Same as OPT_FEED_PLAYLIST_NEWFIRST except playlist is ordered from oldest to newest.
.PP
.nf
.fam C
            Note: It is possible to use more than one option per feed, this will combine the effects of the options in order from
                      top to bottom as they are listed here.  Exception is the OPT_FEED_PLAYLIST OR the OPT_PREFER options, they are
              mutually exclusive and cannot be combined with each other but can be combined with other options.

            Examples:
              http://somesite.com/feed.rss CATEGORY Feed Name OPT_PREFER_IPV4
              http://somesite.com/feed.rss CATEGORY Feed Name OPT_PREFER_IPV6
              http://somesite.com/feed.rss CATEGORY Feed Name OPT_NO_CERT_CHECK
              http://somesite.com/feed.rss CATEGORY Feed Name OPT_CONTENT_DISPOSITION
              http://somesite.com/feed.rss CATEGORY Feed Name OPT_CONTENT_DISPOSITION OPT_DISPOSITION_FAIL
              http://somesite.com/feed.rss CATEGORY Feed Name OPT_FILENAME_LOCATION
              http://somesite.com/feed.rss CATEGORY Feed Name OPT_FILENAME_RENAME_MDATE
              http://somesite.com/feed.rss CATEGORY Feed Name OPT_FILENAME_LOCATION OPT_FILENAME_RENAME_MDATE
              http://somesite.com/feed.rss CATEGORY Feed Name OPT_FEED_ORDER_ASCENDING
              http://somesite.com/feed.rss CATEGORY Feed Name OPT_FEED_PLAYLIST_NEWFIRST
              http://somesite.com/feed.rss CATEGORY Feed Name OPT_FEED_PLAYLIST_OLDFIRST



.fam T
.fi
.SH HANDLING UTF-16 FEEDS

Some servers provide their feeds in UTF-16 format rather than the more common UTF-8.
.PP
To automatically convert these files, create a secondary serverlist at:
.PP
.nf
.fam C
        $HOME/.podget/serverlist.utf16

.fam T
.fi
Remember to change the name of the serverlist to match what you set it to with config_serverlist if you changed it.
.SH AUTHORS
Dave Vehrs
